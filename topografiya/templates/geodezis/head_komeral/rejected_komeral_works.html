{% extends 'master.html' %}
{% load i18n %}
{% load static %}
{% block title %} Бош геодезис назорати {% endblock %}

{% block content%}

{% block stylecontent %}
<style>
    p {
        margin: 0;
        color: #111727 !important;
    }
    .form-plan{
        border: 1px solid #e6edef;
    }

    .actform {
        border: none;
        border-bottom: 1px solid #cccccc;
    }

</style>
            {% load l10n %}
    {% load humanize %}
{% endblock stylecontent %}
        <link rel="stylesheet" type="text/css" href="{% static 'assets/css/dropzone.css' %}">

  <div class="modal fade modal-bookmark " id="exampleModal"
       tabindex="-1" aria-labelledby="exampleModalLabel"
       style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
              <div class="modal-header bg-primary">
                  <h5 class="modal-title" id="exampleModalLabel">
                      {% trans "Информация о заказе" %}</h5>
                  <button class="btn-close text-white" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="row">
                <div class="col-lg-6">
                          <div class="mb-2">
                              <b>{% trans "Номер договора" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.object_number }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Дата договора" %}</b>
                              <p>{{ pdowork.pdowork.agreement_date }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Наименование объекта" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.object_name }} </p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Заказчик" %}</b>
                              <p>{{ pdowork.pdowork.customer }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Адрес объекта" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.object_address }}</p>
                          </div>
                      </div>

                      <div class="col-lg-6 text-end">
                          <div class="mb-2">
                              <b>{% trans "Сроки выполнения" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.work_term.amount }} {% trans "День" %}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Реквизиты заказчика" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.customer_info }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Вид работы" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.work_type }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Сумма договора" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.object_cost|intcomma }}</p>
                          </div>
                          <div class="mb-2">
                              <b>{% trans "Отдел ответственный за исполнительнение" %}<sup style="color: red;">*</sup></b>
                              <p>{{ pdowork.pdowork.department }}</p>
                          </div>
                      </div>
                  </div>
                   <div class="row">
                      <div class="col-md-12">
                          <a href="/{{ pdowork.pdowork.latter }}" target="_blank"><h6 class=""> <i class="fa fa-file-word-o"></i>{% trans "Ознакомление с письмом заказчика" %} </h6></a>
                      </div>
                      <div class="col-md-12">
                          <a href="/{{ pdowork.pdowork.tz }}" target="_blank"><h6 class=""> <i class="fa fa-file-word-o"></i>{% trans "Ознакомление с техническим заданием" %}</h6></a>
                      </div>
                      <div class="col-md-12">
                          <a href="/{{ pdowork.pdowork.smeta }}" target="_blank"><h6 class=""> <i class="fa fa-file-word-o"></i>{% trans "Ознакомление со сметой" %} </h6></a>
                      </div>

                  </div>
              </div>
          </div>
      </div>
  </div>

    <div class="modal fade modal-bookmark " id="exampleModal1"
       tabindex="-1" aria-labelledby="exampleModalLabel1"
       style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
              <div class="modal-header bg-danger">
                  <h5 class="modal-title text-white" id="exampleModalLabel1">
                      {% trans "Отказанные" %}
                  </h5>
                  <button class="btn-close text-white" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="row">
                      <div class="col-md-12">
                            <ol>
                                    {% for work in rejects %}
                                        <li>
                                            <ul>
                                               <li class="p-1"><b class="text-primary">{% trans "Причина возврата" %}: </b> {{ work.reason }}</li>
                                                {% if work.file %}
                                                    <li class="p-1"><a href="/{{ work.file }}" target="_blank"><i class="fa fa-file-pdf-o"></i> {% trans "Приложение причины возврата" %}</a></li>
                                                {% endif %}
                                            </ul>
                                            <hr>
                                        </li>
                                    {% endfor %}

                            </ol>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>



<div class="modal fade bd-example-modal-lg" tabindex="0" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
         <div class="modal-content">
            <div class="modal-header bg-primary">
                <h4 class="modal-title " id="myLargeModalLabel">
                    {% if order.type_of_sirie == '0' %}
                        Полевые материалы по БПЛА
                    {% endif %}
                    {% if order.type_of_sirie == '1' %}
                        Полевые материалы GNSS
                    {% endif %}
                    {% if order.type_of_sirie == '1' %}
                        Сырые измерительные данные для тахеометрической съемки (по факту)
                    {% endif %}
                </h4>
                <div type="button" data-bs-dismiss="modal" aria-label="Close">X</div>
            </div>
           <div class="modal-body">

                       <div class="row text-end">
                    {% if order.type_of_sirie == '0' %}
                        {% if siriefiles.file1_1 %}
                                <div class="col-lg-6 m-b-10">
                                    <div class="m-b-10">
                                        <div>Разрешение на залет от МО РУз</div>
                                        <a href="/{{ siriefiles.file1_1 }}" target="_blank"> <i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                                    </div>
                                </div>
                        {% endif %}
                        {% if siriefiles.file1_2 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Схема планирования залета БПЛА<sup style="color: red;">*</sup></div>
                            <a  href="/{{ siriefiles.file1_2 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_3 %}
                    <div class="col-lg-6 m-b-10">
                          <div class="m-b-10">
                            <div>Схема выполненных залетов<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_3 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_4 %}
                    <div class="col-lg-6 m-b-10">
                        <div class='m-b-10'>
                            <div>Отчёт калибровки<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_4 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_5 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Схема расположение опознаков и исходные пункты<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_5 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_6 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Каталог координат исходных пунктов<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_6 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_7 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Ведомость обследование пунктов<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_7 }}"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_8 %}
                    <div class="col-lg-6 m-b-10">
                         <div class="m-b-10">
                            <div>Кроки  исходных пунктов<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_8 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_9 %}
                    <div class="col-lg-6 m-b-10">
                         <div class="m-b-10">
                            <div>Отчёт обработки ортофотоплана<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_9 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_10 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Измерения, скаченные с прибора(БПЛА)<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_10 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                        {% if siriefiles.file1_11 %}
                    <div class="col-lg-6 m-b-10">
                        <div class="m-b-10">
                            <div>Фото. опознаков<sup style="color: red;">*</sup></div>
                            <a href="/{{ siriefiles.file1_11 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                        </div>
                    </div>
                            {% endif %}
                    {% endif %}

                    {% if order.type_of_sirie == '1' %}
                        {% if siriefiles.file2_1 %}
                         <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Каталог координат исходных пунктов</div>
                                <a href="/{{ siriefiles.file2_1 }}" target="_blank"> <i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_2 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Каталог кооодинат долговременных точек <sup style="color: red;">*</sup></div>
                                <a  href="/{{ siriefiles.file2_2 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_3 %}
                        <div class="col-lg-6 m-b-10">
                              <div class="m-b-10">
                                <div>Ведомость обследование пунктов<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file2_3 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_4 %}
                        <div class="col-lg-6 m-b-10">
                            <div class='m-b-10'>
                                <div>Отчёт калибровки<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file2_4 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_5 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Кроки  исходных пунктов<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file2_5 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_6 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Измерения, скаченные с прибора ( GNSS )<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file2_6 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                        {% if siriefiles.file2_7 %}
                         <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Схема калибровки с границами объекта<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file2_7 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                            {% endif %}
                    {% endif %}

                     {% if order.type_of_sirie == '2' %}
                         {% if siriefiles.file3_1 %}
                         <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Ведомость обследования наличия и состояния пунктов геодезической сети на объекте</div>
                                <a href="/{{ siriefiles.file3_1 }}" target="_blank"> <i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_2 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Каталог исходных пунктов и ранее заложенных точек <sup style="color: red;">*</sup></div>
                                <a  href="/{{ siriefiles.file3_2 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_3 %}
                        <div class="col-lg-6 m-b-10">
                              <div class="m-b-10">
                                <div>Схема съемочного обоснования<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_3 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_4 %}
                        <div class="col-lg-6 m-b-10">
                            <div class='m-b-10'>
                                <div>Хурналы нивелирования теодолитных ходов<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_4 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_5 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Ведомость уравнивания теодолитных ходов и характеристики<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_5 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_6 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Ведомость нивелирных ходов и характеристики<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_6 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_7 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Схема уравнивания<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_7 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_8 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Схема размещения объекта по планшетам<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_8 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_9 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Каталог координат (пикеты)<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_9 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                         {% if siriefiles.file3_10 %}
                        <div class="col-lg-6 m-b-10">
                            <div class="m-b-10">
                                <div>Измерения, скаченные с прибора (тахеометра)<sup style="color: red;">*</sup></div>
                                <a href="/{{ siriefiles.file3_10 }}" target="_blank"><i class="fa fa-eye" aria-hidden="true"></i> {% trans "Просмотр файла" %}</a>
                            </div>
                        </div>
                             {% endif %}
                    {% endif %}


                </div>
            </div>
        </div>
    </div>
</div>

{% csrf_token %}


        <div class="page-body">
            <div class="container-fluid">
                <div class="page-header">
                    <div class="row">

                        <div class="col-sm-6">
                            <h3>{% trans "Контроль главного геодезиста" %}</h3>
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{% url 'index' %}"><i class="fa fa-home f-20"></i></a></li>
                                <li class="breadcrumb-item"><a href="{% url 'geodesiz_komeral_works' %}">{% trans "Контроль главного геодезиста" %}</a></li>
                                <li class="breadcrumb-item" ><a href="{% url 'show_geodesiz_kameral_work' id=workerobject.object.id %}">{{ workerobject.object.pdowork.object_name }}</a></li>
                            </ol>

                        </div>

                        <div class="col-sm-6 text-end">
                            {% if rejects %}
                                <button  class="btn btn-danger"  data-bs-toggle="modal" data-bs-target="#exampleModal1"><i class="fa fa-refresh"></i>
                                    {% trans "Количество отказов" %}
                                     <span class="badge rounded-pill bg-white">
                                        <b class="text-danger">{{ rejects.count }}</b>
                                     </span>

                                </button>
                            {% endif %}
                            <button  class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="icofont icofont-maximize"></i>
                               {% trans "Информация о заказе" %}
                            </button>
                        </div>



                    </div>
                </div>
            </div>

            <div class="container-fluid">
                <div class="row">
                    <div class="col-xl-12 col-md-12 box-col-12">
                        <div class="file-content">
                            <div class="card">
                                <div class="card-body file-manager ">
                                    <h4 class="m-b-20 m-t-20">
                                        {% trans "Главный геодезист по контролю съемки инженерных сетей" %}
                                    </h4>
                                    <div class="row m-b-30">
                                        <div class="col-lg-12">
                                            <div id="map"></div>
                                            <br>
                                        </div>
                                    </div>
                                    <ul class="files ">
                                        <li class="file-box ">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i></div>
                                            <div class="file-bottom">
                                                <h6>1. Скрыть изм-ные данные</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button data-bs-toggle="modal" data-bs-target=".bd-example-modal-lg" class="btn btn-primary w-100 m-t-10">{% trans "Просмотр" %}</button>
                                            </div>
                                        </li>
                                        <li class="file-box ">
                                            <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                            <div class="file-bottom">
                                                <h6>2. Абрис</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.abris_file }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>
                                        <li class="file-box ">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i></div>
                                            <div class="file-bottom">
                                                <h6>3. Кроки</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.kroki_file }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>
                                        <li class="file-box ">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i></div>
                                            <div class="file-bottom">
                                                <h6>4. Эксплуатация колодцев</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.jurnal_file }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>
                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i>
                                            </div>
                                            <div class="file-bottom">
                                                <h6>5. Ж эксплуатация колодцев</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.vidimes_file }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>

                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i>
                                            </div>
                                            <div class="file-bottom ">
                                                <h6>6. Лист эксплуатирующими </h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.list_agreement_file   }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>

                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o f-36 txt-primary"></i>
                                            </div>
                                            <div class="file-bottom ">
                                                <h6>7. Топографический план </h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="/{{ workerobject.topo_plan }}" target="_blank" class="text-white">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>

                                         <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                            <div class="file-bottom ">
                                                <h6>8. Предписание </h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="#" target="_blank" class="file text-white" data-id="{{ workerobject.object.id }}">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>



                                        {% if programwork %}
                                            {% if programwork.status == 4 %}
                                            <li class="file-box m-t-5">
                                                <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                                <div class="file-bottom ">
                                                    <h6>9. Программа работ </h6>
                                                    <p>Ознакомиться с файлом отправки</p>
                                                    <button class="btn btn-primary w-100 m-t-10"><a href="#" id="doing_program_work_file" programwork-id="{{ programworkform.id }}" class="text-white"> {% trans "Просмотр" %}</a></button>
                                                </div>
                                            </li>
                                        {% endif %}
                                    {% endif %}


                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                            <div class="file-bottom ">
                                                <h6>10. Пояснительная записка</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="#" target="_blank" class="text-white" id="doing_poyasitelniy_file" object-id="{{ workerobject.object.id }}">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>

                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                            <div class="file-bottom ">
                                                <h6>10. AKT полевого контроля</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                <button class="btn btn-primary w-100 m-t-10"><a href="#" target="_blank" class="text-white" id="doing_akt_polevoy_file" akt-object-id="{{ workerobject.object.id }}">{% trans "Просмотр" %}</a></button>

                                            </div>
                                        </li>
                                        <li class="file-box m-t-5">
                                            <div class="file-top"><i class="fa fa-file-pdf-o txt-primary"></i></div>
                                            <div class="file-bottom ">
                                                <h6>11. AKT комерал контроля</h6>
                                                <p>Ознакомиться с файлом отправки</p>
                                                <button class="btn btn-primary w-100 m-t-10"><a href="#" target="_blank" class="text-white" id="doing_akt_komeral_file" akt-object-id="{{ workerobject.object.id }}">{% trans "Просмотр" %}</a></button>
                                            </div>
                                        </li>


                                    </ul>

{#                                    <ul class="folder ">#}
{#                                        <li class="folder-box m-t-5">#}
{#                                            <h6>8. Время проверить</h6>#}
{#                                            <div class="media align-items-center"><i#}
{#                                                    class="fa fa-clock-o f-36 txt-danger"></i>#}
{#                                                <div class="media-body ms-3">#}
{#                                                    <p style="font-size: 14px; color: #999999" class="m-0"><span style="font-size: 20px; color: #168eea">16</span>/01/2022</p>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </li>#}
{#                                    </ul>#}
                                    <hr>
{#                                    <div class="card">#}

                            </div>
                        </div>
                    </div>
                </div>

                </div>


            </div>
        </div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type="text/javascript">
    $(document).on('click',"#doing_program_work_file",function(){
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("data-id", $(this).attr('programwork-id'));
        {#alert($(this).attr('data-id'));#}
        event.preventDefault()
        $.ajax({
            type: 'POST',
            url: '{% url 'doing_program_work_file' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,

            success: function (result){
               window.open('/static/files/'+result,'_blank');;
{#                var link = document.createElement('a');#}
{#                link.href = "/static/files/file.pdf";#}
{#                link.download = "file_" + new Date() + ".pdf";#}
{#                link.click();#}
{#                link.remove();#}
            },

            error: function(){
              alert('Serverga yubara olmaymiz !! ');
            }

        });

    });
</script>
<script type="text/javascript">
    $(document).on('click',".file",function(){
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("data-id", $(this).attr('data-id'));
        {#alert($(this).attr('data-id'));#}
        event.preventDefault()
        $.ajax({
            type: 'POST',
            url: '{% url 'order_to_pdf' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,

            success: function (result){
                window.open('/static/files/file.pdf','_blank');
{#                var link = document.createElement('a');#}
{#                link.href = "/static/files/file.pdf";#}
{#                link.download = "file_" + new Date() + ".pdf";#}
{#                link.click();#}
{#                link.remove();#}
            },

            error: function(){
              alert('Serverga yubara olmaymiz !! ');
            }

        });

    });
</script>
                        <script type="text/javascript">
    $(document).on('click',"#doing_akt_polevoy_file",function(){
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
         data.append("object-id", $(this).attr('akt-object-id'));

        event.preventDefault()
        $.ajax({
            type: 'POST',
            url: '{% url 'doing_akt_polevoy_file' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,

            success: function (result){
                window.open('/static/files/'+result,'_blank');
{#                var link = document.createElement('a');#}
{#                link.href = "/static/files/file.pdf";#}
{#                link.download = "file_" + new Date() + ".pdf";#}
{#                link.click();#}
{#                link.remove();#}
            },

            error: function(){
              alert('Serverga yubara olmaymiz !! ');
            }

        });

    });
</script>
                        <script type="text/javascript">
    $(document).on('click',"#doing_akt_komeral_file",function(){
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
         data.append("data-id", $(this).attr('akt-object-id'));

        event.preventDefault()
        $.ajax({
            type: 'POST',
            url: '{% url 'doing_akt_komeral_file' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,

            success: function (result){
                window.open('/static/files/'+result,'_blank');
{#                var link = document.createElement('a');#}
{#                link.href = "/static/files/file.pdf";#}
{#                link.download = "file_" + new Date() + ".pdf";#}
{#                link.click();#}
{#                link.remove();#}
            },

            error: function(){
              alert('Serverga yubara olmaymiz !! ');
            }

        });

    });
</script>

    <script type="text/javascript">
    $(document).on('click',"#doing_poyasitelniy_file",function(){
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
         data.append("object-id", $(this).attr('object-id'));

        event.preventDefault()
        $.ajax({
            type: 'POST',
            url: '{% url 'doing_poyasitelniy_file' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,

            success: function (result){
                window.open('/static/files/poyasitelniy/poyasitelniy.pdf','_blank');
{#                var link = document.createElement('a');#}
{#                link.href = "/static/files/file.pdf";#}
{#                link.download = "file_" + new Date() + ".pdf";#}
{#                link.click();#}
{#                link.remove();#}
            },

            error: function(){
              alert('Serverga yubara olmaymiz !! ');
            }

        });

    });
</script>
        <script>
    $(document).ready(function(){
    var data = new FormData();
    data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
    data.append('id',{{ pdowork.id }});

        $.ajax({
            url: '{% url "obj_data" %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            type: 'post',
            success: function (result) {
                    json_point=JSON.parse(result.data1);
                    console.log(json_point.features);
                    if (json_point.features[0].geometry!=null){
                        json_point.features[0].geometry.coordinates.forEach(function(corr,i){
                             var point={type:'Point',coordinates:corr};
                            L.geoJson(point,{ onEachFeature:function(features,layer){drawnItems.addLayer(layer); }
                            });
                        });
                    }

                    json_line=JSON.parse(result.data2);
                    if (json_line.features[0].geometry!=null){
                    json_line.features[0].geometry.coordinates.forEach(function(corr,i){
                    var polyline={type:'LineString',coordinates:corr};
                    L.geoJson(polyline,{ onEachFeature:function(features,layer){drawnItems.addLayer(layer); }
                    });
                    });
                }


                    json_polygon=JSON.parse(result.data3);
                    if (json_polygon.features[0].geometry!=null){
                    json_polygon.features[0].geometry.coordinates.forEach(function(corr,i){
                    var polygon={type:'Polygon',coordinates:corr};
                    L.geoJson(polygon,{ onEachFeature:function(features,layer){drawnItems.addLayer(layer); }
                    });
                    });
                }
            },
            error: function(){
              console.log('xatolik')
            }

    });
    });
    </script>


<script>
    $("#save_akt").click(function(event) {
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("worker", $('#worker').val());
        data.append("work_id", $('#work_id').val());
        var array = [];
        for(var i=1;i<64;i++){
                array.push($('#a'+i).val());
        }
        data.append("array", array);
        event.preventDefault();

        if($('#a61').val() == 0){
           alert("Ishni baxolash maydonini to'ldiring");
        }
        else{
        $.ajax({
            type: 'POST',
            url: '{% url 'save_akt_komeral' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            success: function (result){
               location.replace('/leader_komeral_works');
            },

            error: function(){
              alert('Ajax da xatolik !! ');
            }
        });
        }



        });
</script>

<script>
    $(".edit_akt").click(function(event) {
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("worker", $('#worker').val());
        data.append("work_id", $('#work_id').val());

        var array = [];
        for(var i=1;i<127;i++){
                array.push($('#a'+i).val());
        }
        data.append("array", array);

        var array1 = [];
        for(var j=1;j<8;j++){
                array1.push($('#a1_'+j).val());
        }
        data.append("array1", array1);

        var array2 = [];
        for(var k=1;k<8;k++){
                array2.push($('#a2_'+k).val());
        }
        data.append("array2", array2);

        var array3 = [];
        for(var l=1;l<10;l++){
                array3.push($('#a3_'+l).val());
        }
        data.append("array3", array3);

        var array4 = [];
        for(var m=1;m<7;m++){
                array4.push($('#a4_'+m).val());
        }
        data.append("array4", array4);

        var array5 = [];
        for(var n=1;n<7;n++){
                array5.push($('#a5_'+n).val());
        }
        data.append("array5", array5);

        var array6 = [];
        for(var b=1;b<10;b++){
                array6.push($('#a6_'+b).val());
        }
        data.append("array6", array6);

        var array7 = [];
        for(var c=1;c<6;c++){
                array7.push($('#a7_'+c).val());
        }
        data.append("array7", array7);

        var array8 = [];
        for(var d=1;d<6;d++){
                array8.push($('#a8_'+d).val());
        }
        data.append("array8", array8);

        event.preventDefault();

        if($('#a1').val() == 0){
           alert("Maydonni to'ldiring");
        }
        else{
        $.ajax({
            type: 'POST',
            url: '{% url 'edit_akt_polevoy' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            success: function (result){
               location.replace(window.location.pathname);
            },

            error: function(){
              alert('Ajax da xatolik !! ');
            }
        });
        }



        });
</script>


<script>
    $("#send_to_kameral").click(function(event) {
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("worker", $('#worker').val());
        data.append("work_id", $('#work_id').val());
        var form = "{{ work.pk }}";
        event.preventDefault();

        if(form){
           $.ajax({
            type: 'POST',
            url: '{% url 'send_to_kameral' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            success: function (result){
               location.replace('/leader_polevoy_works');
            },

            error: function(){
              alert('Ajax da xatolik !! ');
            }
        });
        }
        else{
          alert("Maydonni to'ldiring");
        }



        });
</script>

    <script>
    $("#geodezis_deny_komeral").click(function(event) {
        var data = new FormData();
        data.append("csrfmiddlewaretoken", document.getElementsByName("csrfmiddlewaretoken")[0].value);
        data.append("worker", $('#worker').val());
        data.append("work_id", $('#work_id').val());
        data.append("reason", $('#reason').val());
        data.append("reason_file", $('#reason_file')[0].files[0]);
        event.preventDefault();

        if($('#reason').val() != 0 ){
           $.ajax({
            type: 'POST',
            url: '{% url 'geodezis_deny_komeral' %}',
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            success: function (result){
               location.replace('/geodesiz_komeral_works');
            },

            error: function(){
              alert('Ajax da xatolik !! ');
            }
        });
        }
        else{
          $('#error_show').css('display','block');
        }



        });
</script>

    <script>
    function dropdown() {
        document.getElementById("root").style.display="block";
    }
    setTimeout(() => {
        if (document.getElementById('root') !== null) {
            document.getElementById("root").style.display = "none";
        }
    }, 1000)
</script>

{% endblock %}

{% block scriptcontent %}


    <script src="{% static 'assets/js/dropzone/dropzone.js' %}"></script>
    <script src="{% static 'assets/js/dropzone/dropzone-script.js' %}"></script>
    <script src="{% static 'assets/js/notify/bootstrap-notify.min.js' %}"></script>
    <script src="{% static 'assets/js/notify/notify-script.js' %}"></script>
    <script src="{% static 'assets/js/datepicker/date-time-picker/moment.min.js' %}"></script>
    <script src="{% static 'assets/js/datepicker/date-time-picker/tempusdominus-bootstrap-4.min.js' %}"></script>
    <script src="{% static 'assets/js/datepicker/date-time-picker/datetimepicker.custom.js' %}"></script>
    <script src="{% static 'assets/js/boottable.js' %}"></script>
{% endblock scriptcontent %}

